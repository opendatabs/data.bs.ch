<ANY ods-datetime="datetime"></ANY>

<div ng-init="currentYear = (datetime|moment:'YYYY')">
    <div
        ng-init="years = [+currentYear+1, +currentYear+2, +currentYear+3, +currentYear+4, +currentYear+5, +currentYear+6]">
        <div class="schulferien-container">
            <div class="accordion">
                <!-- Using ng-repeat to generate all year accordions -->
                <div class="year-accordion" ng-repeat="year in years">
                    <input type="checkbox" name="schulferien_accordion" id="schulferien-{{year}}"
                        class="accordion__input" ng-checked="$first">
                    <label for="schulferien-{{year}}" class="accordion__label">Schulferien {{year}}</label>
                    <div class="accordion__content">
                        <div ods-dataset-context context="schulferien-{{year}}"
                            schulferien-{{year}}-domain="https://data.bs.ch" schulferien-{{year}}-dataset="100397"
                            schulferien-{{year}}-parameters='{"q": "year:"+year+" AND (name:\"Fasnachts- und Sportferien\" OR name:\"Fruehjahrsferien\" OR name:\"Sommerferien\" OR name:\"Herbstferien\" OR name:\"Weihnachtsferien\")", "sort": "-start_date"}'>

                            <table class="holiday-table">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th class="begin-column">Beginn</th>
                                        <th class="end-column">Ende</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in items" ods-results="items"
                                        ods-results-context="schulferien-{{year}}">
                                        <td class="holiday-type">
                                            <span
                                                ng-if="item.fields.name == 'Fasnachts- und Sportferien'">Fasnacht</span>
                                            <span ng-if="item.fields.name == 'Fruehjahrsferien'">Fr√ºhling</span>
                                            <span ng-if="item.fields.name == 'Sommerferien'">Sommer</span>
                                            <span ng-if="item.fields.name == 'Herbstferien'">Herbst</span>
                                            <span ng-if="item.fields.name == 'Weihnachtsferien'">Weihnachten</span>
                                        </td>
                                        <td class="date">{{ item.fields.start_date | date:'dd. MMMM yyyy' }}</td>
                                        <td class="date">{{ item.fields.end_date | date:'dd. MMMM yyyy' }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>